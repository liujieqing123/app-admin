(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/dealer/module/shopGoods/dealer_goods"],{"0424":function(o,e,s){},1737:function(o,e,s){"use strict";s.r(e);var t=s("a558"),i=s("bcad");for(var a in i)"default"!==a&&function(o){s.d(e,o,function(){return i[o]})}(a);s("4ecc");var n=s("2877"),d=Object(n["a"])(i["default"],t["a"],t["b"],!1,null,"450902fe",null);e["default"]=d.exports},"4ecc":function(o,e,s){"use strict";var t=s("0424"),i=s.n(t);i.a},a558:function(o,e,s){"use strict";var t=function(){var o=this,e=o.$createElement,s=(o._self._c,o.goods_list.map(function(e,s){var t=o._f("changTime")(e.up_time),i=o._f("changTime")(e.down_time);return{$orig:o.__get_orig(e),f0:t,f1:i}}));o.$mp.data=Object.assign({},{$root:{l0:s}})},i=[];s.d(e,"a",function(){return t}),s.d(e,"b",function(){return i})},a865:function(o,e,s){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=i(s("a34a"));function i(o){return o&&o.__esModule?o:{default:o}}function a(o,e,s,t,i,a,n){try{var d=o[a](n),r=d.value}catch(l){return void s(l)}d.done?e(r):Promise.resolve(r).then(t,i)}function n(o){return function(){var e=this,s=arguments;return new Promise(function(t,i){var n=o.apply(e,s);function d(o){a(n,t,i,d,r,"next",o)}function r(o){a(n,t,i,d,r,"throw",o)}d(void 0)})}}var d,r=function(){return Promise.all([s.e("common/vendor"),s.e("components/tki-qrcode/tki-qrcode")]).then(s.bind(null,"e2f9"))},l={props:{mode:{value:Number,default:1},button:{value:String,default:"outside"},show:{value:Boolean,default:!0},radius:{value:String,default:60}},components:{tkiQrcode:r},onHide:function(){console.log("页面显示"," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:247")},data:function(){return{Nshow:!1,close_page_show:!0,Oshow:!0,active:!1,inputVal:"",searchName:"取消",isDelShow:!1,isFocus:!1,cur_id:1,goods_status:1,is_shelves:1,rank_index:0,price_index:3,salesVol_index:5,goods_page:1,goods_list:[],goodsPage_all:"",loading_show:!1,bottom_show:!1,load_text_show:!1,items:[{value:"1",name:"是"},{value:"0",name:"否"}],current:0,rgoods_title:"",cover_imgUrl:"",rgoods_describe:"",rgoods_price:"",loading:!1,disabled:!1,imgArr:[{id:0,img_url:""},{id:1,img_url:""},{id:2,img_url:""},{id:3,img_url:""},{id:4,img_url:""}],img_show:!0,uploading_show:!1,success_show:!1,type:"1",dealer_bond:"",mask_show:!1,val:"",size:350,icon:"",onval:!0,loadMake:!0,pay_sn:""}},mounted:function(){},created:function(){d=this,this.CheckBond()},onLoad:function(){},filters:{changTime:function(o){var e=new Date(1e3*o),s=e.getFullYear(),t=e.getMonth()+1;t<10&&(t="0"+t);var i=e.getDate();i<10&&(i="0"+i);var a=e.getHours();a<10&&(a="0"+a);var n=e.getMinutes();n<10&&(n="0"+n);var d=e.getSeconds();d<10&&(d="0"+d);var r=s+"-"+t+"-"+i+" "+a+":"+n+":"+d;return r}},methods:{CheckBond:function(){var e=this;this.$api.CheckBond({}).then(function(o){console.log(o.data," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:399"),0==o.data.errcode?1===o.data.data.is_goods?(e.Oshow=!0,e.Nshow=!1,e.close_page_show=!1,e.DealerGoodsList()):(e.Oshow=!1,e.Nshow=!1,e.close_page_show=!0):10010==o.data.errcode&&(e.Nshow=!0,e.Oshow=!1,e.close_page_show=!1,e.dealer_bond=o.data.dealer_bond)}).catch(function(e){o.showToast({title:e,icon:"none",duration:2e3})})},DealerGoodsList:function(){var e=this;this.load_text_show=!0,this.loading_show=!1,this.$api.DealerGoodsList({page:this.goods_page,nums:10,goods_status:this.goods_status,is_shelves:this.is_shelves,goods_total_name:this.inputVal,order:this.rank_index}).then(function(s){if(console.log(s," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:440"),e.load_text_show=!1,0==s.data.errcode){e.loading_show=!0;for(var t=s.data.data.data,i=0;i<t.length;i++)e.goods_list.push(t[i]);e.goodsPage_all=s.data.data.last_page,e.goods_list.length==s.data.data.total?(e.loading_show=!1,e.bottom_show=!0):(e.loading_show=!0,e.bottom_show=!1),0==t.length&&(e.bottom_show=!1)}else o.showToast({title:"请求失败",icon:"none",duration:2e3})}).catch(function(s){e.load_text_show=!1,o.showToast({title:s,icon:"none",duration:2e3})})},clickLoad:function(){this.goods_page++,this.goods_page>this.goods_page||this.DealerGoodsList()},Payment:function(){this.mask_show=!0,this.getQRcode()},CloseQRcode:function(){this.mask_show=!1,this.cancelPay()},getQRcode:function(){var e=this;e.$api.ToBond({}).then(function(s){console.log(s," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:499"),1==s.data.errcode?(console.log(s," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:501"),e.val=s.data.code_url,e.pay_sn=s.data.pay_sn,e.getState()):o.showToast({title:"请求失败",icon:"none",duration:2e3})}).catch(function(e){o.showToast({title:"请求异常",icon:"none",duration:2e3})})},getState:function(){var e=this,s=this;s.$api.CheckIsPay({pay_sn:this.pay_sn}).then(function(o){console.log(o.data," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:526"),0==o.data.errcode&&(console.log("支付成功"," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:528"),e.onval=!1,e.mask_show=!1,e.Oshow=!0,e.Nshow=!1,e.close_page_show=!1),30023==o.data.errcode&&(console.log("未支付"," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:536"),1==s.mask_show&&setTimeout(function(){s.getState()},1e3)),30001==o.data.errcode&&console.log("订单取消"," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:544")}).catch(function(e){o.showToast({title:"请求异常",icon:"none",duration:2e3})})},cancelPay:function(){var e=this;e.$api.CancelBond({pay_sn:this.pay_sn}).then(function(e){0==e.data.errcode?console.log(e," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:561"):o.showToast({title:"请求失败",icon:"none",duration:2e3})}).catch(function(e){o.showToast({title:"请求异常",icon:"none",duration:2e3})})},qrR:function(){},focus:function(){this.active=!0},blur:function(){this.isFocus=!1,this.inputVal||(this.active=!1)},clear:function(){this.goods_list=[],this.inputVal="",this.goods_page=1,this.price_index=3,this.salesVol_index=5,this.DealerGoodsList()},getFocus:function(){this.isFocus=!0},search:function(){""!=this.inputVal&&(this.goods_list=[],this.goods_page=1,this.price_index=3,this.salesVol_index=5,this.DealerGoodsList())},SortRates:function(){this.salesVol_index=5,this.price_index--,this.rank_index=this.price_index,this.price_index<=0&&(this.rank_index=2,this.price_index=2),this.goods_list=[],this.goods_page=1,this.DealerGoodsList()},SortSales:function(){this.price_index=3,this.salesVol_index--,this.rank_index=this.salesVol_index,this.salesVol_index<=2&&(this.rank_index=4,this.salesVol_index=4),this.goods_list=[],this.goods_page=1,this.DealerGoodsList()},curId:function(o){d=this,d.goods_list=[],d.inputVal="",d.goods_page=1,d.price_index=3,d.salesVol_index=5,d.cur_id=o,1==d.cur_id||2==d.cur_id?(d.is_shelves=o,d.goods_status=1):3==d.cur_id&&(d.goods_status=2,d.is_shelves=0),20!=o&&this.DealerGoodsList()},ChangeSold:function(e,s){var t="";1==s&&(t="是否上架该商品？"),2==s&&(t="是否下架该商品？");var i=this;o.showModal({title:"提示",content:t,confirmColor:"#febf66",success:function(o){o.confirm?i.isShelves(e,s):o.cancel}})},ToEdit:function(e){o.showModal({title:"提示",content:"确定编辑该商品吗？",confirmColor:"#febf66",success:function(s){s.confirm?o.redirectTo({url:"../dealer/module/shopGoods/module/edit?goodsId="+e}):s.cancel}})},ChangeDelete:function(e){var s=this;o.showModal({title:"提示",content:"确定删除该商品吗？",confirmColor:"#febf66",success:function(o){o.confirm?s.delGoods(e):o.cancel}})},radioChange:function(o){this.type=o.detail.value;for(var e=0;e<this.items.length;e++)if(this.items[e].value===o.target.value){this.current=e;break}},chooseImage:function(){var e=n(t.default.mark(function e(s,i){var a;return t.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this,o.chooseImage({sourceType:["album","camera "],sizeType:["original","compressed"],count:1,success:function(e){a.img_show=!1,a.uploading_show=!0;o.uploadFile({url:"https://xt.dfbtds.com/api_app/Goods/uploadFile",filePath:e.tempFilePaths[0],header:{Authorization:o.getStorageSync("token")},name:i,formData:{name:i},success:function(o){var e=JSON.parse(o.data);if("-1"==s)0==e.errcode?(a.img_show=!0,a.uploading_show=!1,a.success_show=!0,a.cover_imgUrl="https://xt.dfbtds.com/"+e.data.goods_image,console.log(e.data.goods_image," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:763")):(console.log("上传失败"," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:765"),a.success_show=!1);else if(0==e.errcode)for(var t=0;t<a.imgArr.length;t++)a.imgArr[t].id==s&&(a.imgArr[t].img_url="https://xt.dfbtds.com/"+e.data.goods_slides);else console.log("上传失败"," at pages\\dealer\\module\\shopGoods\\dealer_goods.vue:776")},fail:function(){a.img_show=!0,a.success_show=!1}})}});case 2:case"end":return e.stop()}},e,this)}));function s(o,s){return e.apply(this,arguments)}return s}(),addGoods:function(){for(var e=this,s=[],t=0;t<this.imgArr.length;t++)s.push(this.imgArr[t].img_url);this.$api.addGoods({goods_total_name:this.rgoods_title,goods_images:this.cover_imgUrl,goods_describe:this.rgoods_describe,goods_price:this.rgoods_price,goods_slides:s,is_water:this.type}).then(function(s){0==s.data.errcode?(o.showToast({title:"商品发布成功",icon:"success",duration:2e3}),e.rgoods_title="",e.cover_imgUrl="",e.rgoods_describe="",e.rgoods_price="",e.imgArr=[{id:0,img_url:""},{id:1,img_url:""},{id:2,img_url:""},{id:3,img_url:""},{id:4,img_url:""}],e.success_show=!1,e.uploading_show=!1):40243==s.data.errcode?o.showToast({title:s.data.msg,icon:"none",duration:2e3}):o.showToast({title:"发布失败",icon:"none",duration:2e3})}).catch(function(e){o.showToast({title:"请求异常",icon:"none",duration:2e3})})},releaseGoods:function(){""!=this.rgoods_title?""!=this.cover_imgUrl?""!=this.rgoods_describe?""!=this.rgoods_price?""!=this.imgArr[0].img_url?(o.showToast({title:"发布中...",icon:"none",duration:1300}),this.addGoods()):o.showToast({title:"请上传商品图片",icon:"none",duration:2e3}):o.showToast({title:"请填写商品价格",icon:"none",duration:2e3}):o.showToast({title:"请填写商品描述",icon:"none",duration:2e3}):o.showToast({title:"请上传商品封面图",icon:"none",duration:2e3}):o.showToast({title:"请填写商品标题",icon:"none",duration:2e3})},isShelves:function(e,s){var t=this;this.$api.isShelves({is_shelves:s,goods_id:e}).then(function(e){if(0==e.data.errcode){var i="";1==s&&(i="商品已上架"),2==s&&(i="商品已下架"),o.showToast({title:i,icon:"success",duration:2e3}),t.goods_list=[],t.goods_page=1,t.price_index=3,t.salesVol_index=5,t.DealerGoodsList()}else o.showToast({title:"请求失败",icon:"none",duration:2e3})}).catch(function(e){o.showToast({title:e,icon:"none",duration:2e3})})},delGoods:function(e){var s=this;this.$api.delGoods({goods_id:e}).then(function(e){0==e.data.errcode?(o.showToast({title:"商品删除成功！",icon:"success",duration:2e3}),s.goods_list=[],s.goods_page=1,s.price_index=3,s.salesVol_index=5,s.DealerGoodsList()):o.showToast({title:"请求失败",icon:"none",duration:2e3})}).catch(function(e){o.showToast({title:e,icon:"none",duration:2e3})})}},watch:{inputVal:function(o){o?(this.searchName="搜索",this.isDelShow=!0):(this.searchName="取消",this.isDelShow=!1)}}};e.default=l}).call(this,s("6e42")["default"])},bcad:function(o,e,s){"use strict";s.r(e);var t=s("a865"),i=s.n(t);for(var a in t)"default"!==a&&function(o){s.d(e,o,function(){return t[o]})}(a);e["default"]=i.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/dealer/module/shopGoods/dealer_goods-create-component',
    {
        'pages/dealer/module/shopGoods/dealer_goods-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("1737"))
        })
    },
    [['pages/dealer/module/shopGoods/dealer_goods-create-component']]
]);                
