(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/dealer/module/shopGoods/module/edit"],{"0601":function(o,e,t){},"0e08":function(o,e,t){"use strict";var i=function(){var o=this,e=o.$createElement;o._self._c},s=[];t.d(e,"a",function(){return i}),t.d(e,"b",function(){return s})},"2e02":function(o,e,t){"use strict";t.r(e);var i=t("97c6"),s=t.n(i);for(var n in i)"default"!==n&&function(o){t.d(e,o,function(){return i[o]})}(n);e["default"]=s.a},6681:function(o,e,t){"use strict";t.r(e);var i=t("0e08"),s=t("2e02");for(var n in s)"default"!==n&&function(o){t.d(e,o,function(){return s[o]})}(n);t("d2ef");var a=t("2877"),d=Object(a["a"])(s["default"],i["a"],i["b"],!1,null,"0ab9faa3",null);e["default"]=d.exports},"97c6":function(o,e,t){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(t("a34a"));function s(o){return o&&o.__esModule?o:{default:o}}function n(o,e,t,i,s,n,a){try{var d=o[n](a),r=d.value}catch(u){return void t(u)}d.done?e(r):Promise.resolve(r).then(i,s)}function a(o){return function(){var e=this,t=arguments;return new Promise(function(i,s){var a=o.apply(e,t);function d(o){n(a,i,s,d,r,"next",o)}function r(o){n(a,i,s,d,r,"throw",o)}d(void 0)})}}var d={data:function(){return{items:[{value:"1",name:"是"},{value:"0",name:"否"}],current:0,loading:!1,disabled:!1,goods_id:"",goods_info:{},type:"1",imgArr:[{id:0,img_url:""},{id:1,img_url:""},{id:2,img_url:""},{id:3,img_url:""},{id:4,img_url:""}]}},onLoad:function(o){this.goods_id=o.goodsId,this.getData()},methods:{goBack:function(){o.redirectTo({url:"/pages/dealer/dealer?curId=2"})},getData:function(){var e=this;this.$api.getEditGoods({goods_id:this.goods_id}).then(function(t){if(console.log(t.data.data," at pages\\dealer\\module\\shopGoods\\module\\edit.vue:120"),0==t.data.errcode){e.goods_info=t.data.data;for(var i=0;i<t.data.data.goods_slides.length;i++)i==e.imgArr[i].id&&(e.imgArr[i].img_url=t.data.data.goods_slides[i])}else o.showToast({title:"请求失败",icon:"none",duration:2e3})}).catch(function(t){e.load_text_show=!1,o.showToast({title:t,icon:"none",duration:2e3})})},chooseImage:function(){var e=a(i.default.mark(function e(t,s){var n;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=this,o.chooseImage({sourceType:["album","camera "],sizeType:["original","compressed"],count:1,success:function(e){o.uploadFile({url:"https://xt.dfbtds.com/api_app/Goods/uploadFile",header:{Authorization:o.getStorageSync("token")},filePath:e.tempFilePaths[0],name:s,formData:{name:s},success:function(o){var e=JSON.parse(o.data);if("-1"==t)0==e.errcode?(n.goods_info.goods_images="https://xt.dfbtds.com/"+e.data.goods_image,console.log(n.goods_info.goods_images," at pages\\dealer\\module\\shopGoods\\module\\edit.vue:166")):console.log("上传失败"," at pages\\dealer\\module\\shopGoods\\module\\edit.vue:168");else if(0==e.errcode)for(var i=0;i<n.imgArr.length;i++)n.imgArr[i].id==t&&(n.imgArr[i].img_url="https://xt.dfbtds.com/"+e.data.goods_slides);else console.log("上传失败"," at pages\\dealer\\module\\shopGoods\\module\\edit.vue:178")},fail:function(o){console.log(o," at pages\\dealer\\module\\shopGoods\\module\\edit.vue:183")}})}});case 2:case"end":return e.stop()}},e,this)}));function t(o,t){return e.apply(this,arguments)}return t}(),releaseGoods:function(){""!=this.goods_info.goods_total_name?""!=this.goods_info.goods_images?""!=this.goods_info.goods_describe?""!=this.goods_info.goods_price?""!=this.imgArr[0].img_url?(o.showToast({title:"提交中...",icon:"none",duration:1300}),this.addGoods()):o.showToast({title:"请上传商品图片",icon:"none",duration:2e3}):o.showToast({title:"请填写商品价格",icon:"none",duration:2e3}):o.showToast({title:"请填写商品描述",icon:"none",duration:2e3}):o.showToast({title:"请上传商品封面图",icon:"none",duration:2e3}):o.showToast({title:"请填写商品标题",icon:"none",duration:2e3})},addGoods:function(){for(var e=[],t=0;t<this.imgArr.length;t++)e.push(this.imgArr[t].img_url);this.$api.editGoods({goods_id:this.goods_id,goods_total_name:this.goods_info.goods_total_name,goods_images:this.goods_info.goods_images,goods_describe:this.goods_info.goods_describe,goods_price:this.goods_info.goods_price,goods_slides:e,is_water:this.type}).then(function(e){console.log(e," at pages\\dealer\\module\\shopGoods\\module\\edit.vue:254"),0==e.data.errcode?o.showToast({title:"商品编辑成功",icon:"success",duration:2e3}):o.showToast({title:"提交失败",icon:"none",duration:2e3})}).catch(function(e){o.showToast({title:"请求异常",icon:"none",duration:2e3})})},radioChange:function(o){this.type=o.detail.value;for(var e=0;e<this.items.length;e++)if(this.items[e].value===o.target.value){this.current=e;break}}}};e.default=d}).call(this,t("6e42")["default"])},d2ef:function(o,e,t){"use strict";var i=t("0601"),s=t.n(i);s.a}},[["921f","common/runtime","common/vendor"]]]);