(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/login"],{"4fb0":function(t,e,n){"use strict";n.r(e);var o=n("784f"),a=n.n(o);for(var s in o)"default"!==s&&function(t){n.d(e,t,function(){return o[t]})}(s);e["default"]=a.a},"5c65":function(t,e,n){"use strict";var o=n("71be"),a=n.n(o);a.a},"71be":function(t,e,n){},"784f":function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{items:[{value:"2",name:"经销商登录"},{value:"1",name:"代理商登录"}],current:0,phone_num:"",password_num:"",captcha_num:"",type:"2",ischeck:!0,show:!0,count:"",timer:null,test:""}},onReady:function(){t.getStorageSync("type")&&(2==t.getStorageSync("type")&&t.redirectTo({url:"../dealer/dealer"}),1==t.getStorageSync("type")&&t.redirectTo({url:"../agent/agent"}))},onLoad:function(t){this},onShow:function(){console.log(t.getStorageSync("phone")," at pages\\index\\login.vue:86"),t.getStorageSync("phone")&&(this.phone_num=t.getStorageSync("phone"),this.password_num=t.getStorageSync("phone_num"))},methods:{ToReg:function(){t.navigateTo({url:"./reg"})},forget:function(){t.navigateTo({url:"./forgetpassword"})},login:function(){var e=this,n=this;n.ischeck=!1,n.$api.Login({phone:n.phone_num,password:n.password_num,type:n.type}).then(function(o){if(n.ischeck=!0,console.log("request success",o.data.data," at pages\\index\\login.vue:115"),0==o.data.errcode){if(2==n.type)if(1==o.data.data.is_auth){t.showToast({title:"登录成功！",icon:"none",duration:1300});try{t.setStorageSync("token",o.data.data.access_token),t.setStorageSync("refresh_token",o.data.data.refresh_token),t.setStorageSync("type",o.data.data.type),t.setStorageSync("token_verify",e.password_num)}catch(a){}try{t.removeStorageSync("phone"),t.removeStorageSync("phone_num")}catch(a){}e.phone_num="",e.password_num="",setTimeout(function(){t.redirectTo({url:"../dealer/dealer?curId=0"})},1300)}else if(2==o.data.data.is_auth)setTimeout(function(){t.redirectTo({url:"./hint?checkState=0"})},500);else if(3==o.data.data.is_auth)setTimeout(function(){t.redirectTo({url:"./hint?checkState=1"})},500);else{t.showToast({title:"您还未提交认证，请先认证",icon:"none",duration:1300});try{t.setStorageSync("token",o.data.data.access_token),t.setStorageSync("phone",o.data.data.phone)}catch(a){}setTimeout(function(){t.redirectTo({url:"./approve"})},1300)}else if(1==n.type){t.showToast({title:"登录成功！",icon:"none",duration:1300});try{t.setStorageSync("token",o.data.data.access_token),t.setStorageSync("refresh_token",o.data.data.refresh_token),t.setStorageSync("type",o.data.data.type),t.setStorageSync("token_verify",e.password_num)}catch(a){}e.phone_num="",e.password_num="",setTimeout(function(){t.redirectTo({url:"../agent/agent"})},1300)}}else t.showToast({title:o.data.msg,icon:"none",mask:!0})}).catch(function(n){e.ischeck=!0,t.showToast({title:"请求异常",icon:"none",mask:!0})})},clickLogin:function(){if(""!=this.phone_num)if(""!=this.password_num){var e=/^[1][1,2,3,4,5,6,7,8,9][0-9]{9}$/;if(e.test(this.phone_num)){var n=/^.{6,}$/;n.test(this.password_num)?this.login():t.showToast({title:"密码不可少于6位",icon:"none",mask:!0})}else t.showToast({title:"请输入正确的手机号码",icon:"none",mask:!0})}else t.showToast({title:"请输入密码",icon:"none",mask:!0});else t.showToast({title:"请输入手机号",icon:"none",mask:!0})},radioChange:function(t){t.detail.value;for(var e=0;e<this.items.length;e++)if(this.items[e].value===t.target.value){this.current=e;break}this.type=t.detail.value}}};e.default=n}).call(this,n("6e42")["default"])},"8c4d":function(t,e,n){"use strict";n.r(e);var o=n("955f"),a=n("4fb0");for(var s in a)"default"!==s&&function(t){n.d(e,t,function(){return a[t]})}(s);n("5c65");var i=n("2877"),r=Object(i["a"])(a["default"],o["a"],o["b"],!1,null,"f565108c",null);e["default"]=r.exports},"955f":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a})}},[["5b64","common/runtime","common/vendor"]]]);