(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/approve"],{5101:function(e,a,t){},"88f2":function(e,a,t){"use strict";t.r(a);var i=t("96ad"),s=t.n(i);for(var n in i)"default"!==n&&function(e){t.d(a,e,function(){return i[e]})}(n);a["default"]=s.a},"96ad":function(e,a,t){"use strict";(function(e){var t;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var i={components:{},data:function(){return{phone:"",shop_name:"",company_name:"",showFlag:!1,loading:!1,disabled:!1,business_license:"",idcard_just:"",idcard_back:"",business_license_address:"",idcard_just_address:"",idcard_back_address:"",hint_show:!1,active_province:-1,province_name:"请选择省",province_id:"",city_all:[],active_city:-1,city_name:"市",city_id:"",area_all:[],active_area:-1,area_name:"区",area_id:"",site_data:[]}},onLoad:function(){t=this,t.phone=e.getStorageSync("phone"),this.getSiteData()},onReady:function(){t=this},methods:{getSiteData:function(){var e=this;e.$api.AreaList({}).then(function(a){0==a.data.errcode&&(e.site_data=a.data.data)}).catch(function(e){console.log("request fail",e," at pages\\index\\approve.vue:157")})},showAddress:function(){this.showFlag=!0},hideAddress:function(){-1!=this.active_province?-1!=this.active_city?-1!=this.active_area?this.showFlag=null:e.showToast({title:"请选择所在区",icon:"none",duration:1500}):e.showToast({title:"请选择所在城市",icon:"none",duration:1500}):e.showToast({title:"请选择所在省份",icon:"none",duration:1500})},selectItem:function(e,a,t){0==e&&(this.active_province=a,this.province_name=t.area_name,this.province_id=t.area_id,this.active_city=-1,this.city_name="请选择市",this.city_id="",this.area_all=[],this.active_area=-1,this.area_name="请选择区",this.area_id="",this.city_all=this.site_data[a].city),1==e&&(this.active_city=a,this.city_name=t.area_name,this.city_id=t.area_id,this.active_area=-1,this.area_name="请选择区",this.area_id="",this.area_all=this.site_data[this.active_province].city[a].area),2==e&&(this.active_area=a,this.area_name=t.area_name,this.area_id=t.area_id)},upload:function(a){var i=a.currentTarget.id;t=this,e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var s=a.tempFilePaths;e.uploadFile({url:"https://xt.dfbtds.com/api_app/Dealer/uploadFile",header:{Authorization:e.getStorageSync("token")},filePath:s[0],name:i,formData:{name:i},success:function(e){console.log(e," at pages\\index\\approve.vue:246");var a=JSON.parse(e.data);switch(i){case"business_license":t.business_license_address=a.data.business_license;break;case"idcard_just":t.idcard_just_address=a.data.idcard_just;break;case"idcard_back":t.idcard_back_address=a.data.idcard_back;break;default:break}}})},error:function(e){console.log(e," at pages\\index\\approve.vue:265")}})},clickSubmit:function(){if(""!=this.shop_name)if(""!=this.company_name)if(""!=this.province_id)if(""!=this.business_license_address)if(""!=this.idcard_just_address)if(""!=this.idcard_back_address){var a=this;e.showModal({title:"提示",content:"已确定信息正确？点击确定提交认证",confirmColor:"#febf66",success:function(e){e.confirm?a.ToDealerIndex():e.cancel}})}else e.showToast({title:"请上传身份证反面",icon:"none",mask:!0});else e.showToast({title:"请上传身份证正面",icon:"none",mask:!0});else e.showToast({title:"请上传营业执照",icon:"none",mask:!0});else e.showToast({title:"请选择所在地区",icon:"none",mask:!0});else e.showToast({title:"请输入企业法人",icon:"none",mask:!0});else e.showToast({title:"请输入您的商铺名称",icon:"none",mask:!0})},backLogin:function(){e.reLaunch({url:"./login"})},ToDealerIndex:function(){var a=this;t=this,e.showLoading({title:"提交中..."}),this.$api.DealerAuth({shop_name:this.shop_name,company_name:this.company_name,provinceid:this.province_id,cityid:this.city_id,areaid:this.area_id,business_license:this.business_license_address,idcard_just:this.idcard_just_address,idcard_back:this.idcard_back_address}).then(function(i){e.hideLoading(),0==i.data.errcode?a.hint_show=!0:10040==i.data.errcode?a.$api.RefreshToken({}).then(function(a){if(0!=a.data.errcode)e.showToast({title:a.data.msg,icon:"none",mask:!0}),e.reLaunch({url:"./login"});else{try{e.setStorageSync("token",a.data.data.access_token),e.setStorageSync("refresh_token",a.data.data.refresh_token),e.setStorageSync("id",a.data.data.id),e.setStorageSync("phone",a.data.data.phone)}catch(i){}t.ToDealerIndex()}}).catch(function(e){console.log("request fail",e," at pages\\index\\approve.vue:387")}):(e.showToast({title:i.data.msg,icon:"none",mask:!0}),e.reLaunch({url:"./login"}))}).catch(function(a){e.hideLoading(),console.log("request fail1",a," at pages\\index\\approve.vue:403")})}}};a.default=i}).call(this,t("6e42")["default"])},b3ea:function(e,a,t){"use strict";t.r(a);var i=t("ce04"),s=t("88f2");for(var n in s)"default"!==n&&function(e){t.d(a,e,function(){return s[e]})}(n);t("e37e");var o=t("2877"),c=Object(o["a"])(s["default"],i["a"],i["b"],!1,null,"9b477012",null);a["default"]=c.exports},ce04:function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement;e._self._c},s=[];t.d(a,"a",function(){return i}),t.d(a,"b",function(){return s})},e37e:function(e,a,t){"use strict";var i=t("5101"),s=t.n(i);s.a}},[["6cfb","common/runtime","common/vendor"]]]);